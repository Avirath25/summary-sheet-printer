<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>3/2/1 Credit Course CIE Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; background: #fdf6ec; padding: 20px; }
    .container { max-width: 700px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 6px rgba(0,0,0,0.2);}
    h2 { text-align: center; color: #994d00; }
    label { display: block; margin-top: 10px; }
    input { width: 100%; padding: 8px; margin-top: 4px; border: 1px solid #ccc; border-radius: 4px; }
    button { margin-top: 20px; padding: 10px; width: 100%; background: #994d00; color: white; border: none; border-radius: 5px; cursor: pointer;}
    button:hover { background: #663300; }
  </style>
</head>
<body>
<div class="container">
  <h2>3/2/1 Credit CIE Calculator</h2>
  
  <label>Student Name: <input type="text" id="studentName"></label>
  <label>USN: <input type="text" id="usn"></label>
  <label>Semester: <input type="text" id="semester"></label>
  <label>Section: <input type="text" id="section"></label>
  <label>Subject: <input type="text" id="subject"></label>
  <label>Subject Code: <input type="text" id="subCode"></label>
  <label>Faculty Name: <input type="text" id="facultyName"></label>

  <label>Test 1 (40): <input type="number" id="test1" max="40"></label>
  <label>Test 2 (40): <input type="number" id="test2" max="40"></label>
  <label>Makeup Test (40): <input type="number" id="makeup" max="40"></label>
  <label>Assignment 1 (25): <input type="number" id="asg1" max="25"></label>
  <label>Assignment 2 (25): <input type="number" id="asg2" max="25"></label>

  <button onclick="calculate()">Calculate & Generate Sheet</button>
</div>

<script>
function calculate() {
    const t1 = parseInt(document.getElementById("test1").value) || 0;
    const t2 = parseInt(document.getElementById("test2").value) || 0;
    const mu = parseInt(document.getElementById("makeup").value) || 0;
    const asg1 = parseInt(document.getElementById("asg1").value) || 0;
    const asg2 = parseInt(document.getElementById("asg2").value) || 0;

    // Best 2 internals out of 40
    const internals = [t1, t2, mu].sort((a,b)=>b-a);
    const best_two_avg40 = (internals[0] + internals[1]) / 2;

    // Scale best two internals to 25
    const scaledInternals = (best_two_avg40 / 40) * 25;

    // Assignments average (out of 25)
    const avg_asg = (asg1 + asg2) / 2;

    // Final CIE (out of 50)
    const finalCie = Math.ceil(scaledInternals + avg_asg);

    // Grade
    let grade = "";
    if (finalCie >= 45) grade = "O - Outstanding";
    else if (finalCie >= 40) grade = "A+ - Excellent";
    else if (finalCie >= 35) grade = "A - Very Good";
    else if (finalCie >= 30) grade = "B+ - Good";
    else if (finalCie >= 25) grade = "B - Above Average";
    else if (finalCie >= 20) grade = "C - Average";
    else if (finalCie >= 15) grade = "P - Pass";
    else grade = "F - Fail";

    // Save to localStorage
    const cieData = {
        studentName: document.getElementById("studentName").value,
        usn: document.getElementById("usn").value,
        semester: document.getElementById("semester").value,
        section: document.getElementById("section").value,
        subject: document.getElementById("subject").value,
        subCode: document.getElementById("subCode").value,
        facultyName: document.getElementById("facultyName").value,

        test1_3credit: t1,
        test2_3credit: t2,
        makeup_3credit: mu,
        best_two_avg40: best_two_avg40.toFixed(1),
        scaledInternals_3credit: scaledInternals.toFixed(1),
        asg1_3credit: asg1,
        asg2_3credit: asg2,
        avg_asg_3credit: avg_asg.toFixed(1),
        final_cie_3credit: finalCie,
        total_cie_secured: finalCie,
        marks_in_words: numToWords(finalCie),
        grade: grade
    };

    localStorage.setItem("cieData", JSON.stringify(cieData));
    window.location.href = "sheet2.html";
}

function numToWords(num) {
    const ones = ["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten",
                  "Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"];
    const tens = ["","","Twenty","Thirty","Forty","Fifty"];
    if (num < 20) return ones[num];
    if (num < 60) return tens[Math.floor(num/10)] + (num%10 ? " " + ones[num%10] : "");
    return num;
}
</script>
</body>
</html>